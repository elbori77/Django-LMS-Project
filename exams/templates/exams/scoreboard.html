{% extends 'exams/base.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Your Scoreboard</h2>

    <ul class="nav nav-tabs" id="scoreTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="a-tab" data-bs-toggle="tab" data-bs-target="#a" type="button" role="tab">A+</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="net-tab" data-bs-toggle="tab" data-bs-target="#net" type="button" role="tab">Network+</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="sec-tab" data-bs-toggle="tab" data-bs-target="#sec" type="button" role="tab">Security+</button>
        </li>
    </ul>

    <div class="tab-content mt-4">
        <!-- A+ Tab -->
        <div class="tab-pane fade show active" id="a" role="tabpanel">
            {% if a_attempts %}
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Score</th>
                            <th>Time Taken</th>
                            <th>Result</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for attempt in a_attempts %}
                            <tr>
                                <td>{{ attempt.timestamp|date:"M d, Y h:i A" }}</td>
                                <td>{{ attempt.score }} / 900</td>
                                <td>{{ attempt.formatted_time }}</td>
                                <td>
                                    {% if attempt.score >= 750 %}
                                        <span class="text-success fw-bold">Passed</span>
                                    {% else %}
                                        <span class="text-danger fw-bold">Failed</span>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p class="mt-3">No A+ exam attempts yet.</p>
            {% endif %}
        </div>

        <!-- Network+ Tab -->
        <div class="tab-pane fade" id="net" role="tabpanel">
            {% if net_attempts %}
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Score</th>
                            <th>Time Taken</th>
                            <th>Result</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for attempt in net_attempts %}
                            <tr>
                                <td>{{ attempt.timestamp|date:"M d, Y h:i A" }}</td>
                                <td>{{ attempt.score }} / 900</td>
                                <td>{{ attempt.formatted_time }}</td>
                                <td>
                                    {% if attempt.score >= 750 %}
                                        <span class="text-success fw-bold">Passed</span>
                                    {% else %}
                                        <span class="text-danger fw-bold">Failed</span>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p class="mt-3">No Network+ exam attempts yet.</p>
            {% endif %}
        </div>

        <!-- Security+ Tab -->
        <div class="tab-pane fade" id="sec" role="tabpanel">
            {% if sec_attempts %}
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Score</th>
                            <th>Time Taken</th>
                            <th>Result</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for attempt in sec_attempts %}
                            <tr>
                                <td>{{ attempt.timestamp|date:"M d, Y h:i A" }}</td>
                                <td>{{ attempt.score }} / 900</td>
                                <td>{{ attempt.formatted_time }}</td>
                                <td>
                                    {% if attempt.score >= 750 %}
                                        <span class="text-success fw-bold">Passed</span>
                                    {% else %}
                                        <span class="text-danger fw-bold">Failed</span>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p class="mt-3">No Security+ exam attempts yet.</p>
            {% endif %}
        </div>
    </div>

    <div class="text-center mt-4">
        <a href="{% url 'dashboard' %}" class="btn btn-primary">Back to Dashboard</a>
    </div>
</div>
{% endblock %}
