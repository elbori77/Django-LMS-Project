{% extends 'exams/base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="text-center mb-4">
        <h2>{{ exam.name }} Results</h2>
        <p><strong>Date Taken:</strong> {{ time_taken|date:"M d, Y H:i" }}</p>
        <p><strong>Time Spent:</strong> {{ time_taken }}</p>
        <p><strong>Score:</strong> {{ score }} / 900</p>
        <p>
            <strong>Result:</strong>
            {% if passed %}
                <span class="text-success fw-bold">Passed</span>
            {% else %}
                <span class="text-danger fw-bold">Failed</span>
            {% endif %}
        </p>
    </div>

    {% if feedback %}
    <div class="card shadow">
        <div class="card-body">
            <h5 class="card-title">Feedback on Incorrect Answers</h5>
            <ul class="list-group list-group-flush">
                {% for qtext, info in feedback.items %}
                    <li class="list-group-item">
                        <strong>Question:</strong> {{ qtext }}<br>
                        <strong>Your Answer:</strong> {{ info.your_answer }}<br>
                        <strong>Correct Answer:</strong> {{ info.correct_answer }}
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}

    <div class="text-center mt-4">
        <a href="{% url 'dashboard' %}" class="btn btn-primary">Back to Dashboard</a>
        <a href="{% url 'exam_list' %}" class="btn btn-outline-secondary">Try Another Exam</a>
    </div>
</div>
{% endblock %}
